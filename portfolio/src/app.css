@import '@fontsource-variable/inter';
@import '@fontsource-variable/jetbrains-mono';
@import 'tailwindcss';
@plugin '@tailwindcss/typography';

@theme {
	--font-display: 'Inter Variable', 'Inter', system-ui, sans-serif;
	--font-sans: 'Inter Variable', 'Inter', system-ui, sans-serif;
	--font-mono: 'JetBrains Mono Variable', 'JetBrains Mono', monospace;

	--color-brand-black: #060503;
	--color-brand-white: #ffffff;
	--color-brand-accent: #C09E5A;
	--color-brand-accent-hover: #B8914F;
	--color-brand-accent-light: #D4B575;
	--color-brand-border: #2A2520;
	--color-brand-surface: rgba(192, 158, 90, 0.04);
	--color-brand-card: rgba(14, 12, 8, 0.6);
	--color-brand-card-border: rgba(192, 158, 90, 0.08);
	--color-brand-text-primary: #ffffff;
	--color-brand-text-secondary: rgba(255, 255, 255, 0.6);
	--color-brand-text-muted: rgba(255, 255, 255, 0.5);
}

[data-theme="light"] {
	--color-brand-black: #FDFAF5;
	--color-brand-white: #1a1a1a;
	--color-brand-accent: #8B7340;
	--color-brand-accent-hover: #7A6536;
	--color-brand-accent-light: #6B5A35;
	--color-brand-border: #D4C9B0;
	--color-brand-surface: rgba(139, 115, 64, 0.06);
	--color-brand-card: rgba(248, 244, 236, 0.9);
	--color-brand-card-border: rgba(139, 115, 64, 0.12);
	--color-brand-text-primary: #1a1a1a;
	--color-brand-text-secondary: rgba(0, 0, 0, 0.6);
	--color-brand-text-muted: rgba(0, 0, 0, 0.45);
}

[data-theme="light"] body {
	color-scheme: light;
}

[data-theme="light"] .prose {
	--tw-prose-body: rgba(0, 0, 0, 0.7);
	--tw-prose-headings: #1a1a1a;
	--tw-prose-lead: rgba(0, 0, 0, 0.7);
	--tw-prose-links: #8B7340;
	--tw-prose-bold: #1a1a1a;
	--tw-prose-counters: rgba(0, 0, 0, 0.5);
	--tw-prose-bullets: rgba(0, 0, 0, 0.5);
	--tw-prose-hr: #D4C9B0;
	--tw-prose-quotes: rgba(0, 0, 0, 0.8);
	--tw-prose-quote-borders: #8B7340;
	--tw-prose-captions: rgba(0, 0, 0, 0.5);
	--tw-prose-code: #6B5A35;
	--tw-prose-pre-code: rgba(0, 0, 0, 0.8);
	--tw-prose-pre-bg: rgba(139, 115, 64, 0.06);
	--tw-prose-th-borders: #D4C9B0;
	--tw-prose-td-borders: rgba(139, 115, 64, 0.08);
}

[data-theme="light"] ::selection {
	background-color: rgba(139, 115, 64, 0.25);
	color: #1a1a1a;
}

/* Invert dark-themed blog SVGs for light mode.
   invert(0.88) turns #000 bg → ~#E0E0E0, #FFF text → ~#1E1E1E.
   hue-rotate(180deg) compensates inversion to preserve original hues. */
[data-theme="light"] img[src$=".svg"][src*="/blog/"] {
	filter: invert(0.88) hue-rotate(180deg);
}

html {
	scroll-behavior: smooth;
	scroll-padding-top: 96px;
	-webkit-font-smoothing: antialiased;
	-moz-osx-font-smoothing: grayscale;
}

body {
	font-family: var(--font-sans);
	color: var(--color-brand-text-primary);
	background-color: var(--color-brand-black);
}

::selection {
	background-color: var(--color-brand-accent);
	color: var(--color-brand-black);
}

*:focus-visible {
	outline: 2px solid var(--color-brand-accent);
	outline-offset: 2px;
}

/* Label / mono uppercase style */
.label-mono {
	font-family: var(--font-mono);
	font-size: 12px;
	font-weight: 400;
	text-transform: uppercase;
	letter-spacing: 0.12em;
}

/* Hero headline style */
.hero-headline {
	font-size: clamp(40px, 7vw, 100px);
	font-weight: 400;
	line-height: 1;
	letter-spacing: -1.5px;
}

/* Section title style */
.section-title {
	font-size: clamp(40px, 6vw, 90px);
	font-weight: 400;
	line-height: 1;
	letter-spacing: -2.7px;
}

/* Body large */
.body-large {
	font-size: clamp(18px, 2vw, 20px);
	font-weight: 300;
	line-height: 1.4;
}

/* Body medium */
.body-medium {
	font-size: 16px;
	font-weight: 300;
	line-height: 1.5;
}

/* Corner bracket card decoration */
.corner-brackets {
	position: relative;
}

.corner-brackets::before,
.corner-brackets::after {
	content: '';
	position: absolute;
	width: 16px;
	height: 16px;
	pointer-events: none;
	transition: width 0.3s ease, height 0.3s ease;
}

.corner-brackets:hover::before,
.corner-brackets:hover::after {
	width: 24px;
	height: 24px;
}

.corner-brackets::before {
	top: -1px;
	left: -1px;
	border-top: 1.5px solid var(--color-brand-accent);
	border-left: 1.5px solid var(--color-brand-accent);
}

.corner-brackets::after {
	bottom: -1px;
	right: -1px;
	border-bottom: 1.5px solid var(--color-brand-accent);
	border-right: 1.5px solid var(--color-brand-accent);
}

/* Additional corner brackets for all four corners */
.corner-brackets-full {
	position: relative;
}

.corner-brackets-full::before,
.corner-brackets-full::after {
	content: '';
	position: absolute;
	width: 16px;
	height: 16px;
	pointer-events: none;
}

.corner-brackets-full::before {
	top: -1px;
	left: -1px;
	border-top: 1.5px solid var(--color-brand-accent);
	border-left: 1.5px solid var(--color-brand-accent);
}

.corner-brackets-full::after {
	bottom: -1px;
	right: -1px;
	border-bottom: 1.5px solid var(--color-brand-accent);
	border-right: 1.5px solid var(--color-brand-accent);
}

/* Gold radial glow */
.gold-glow {
	background: radial-gradient(
		ellipse 50% 50% at 50% 50%,
		rgba(192, 158, 90, 0.08) 0%,
		transparent 70%
	);
}

[data-theme="light"] .gold-glow {
	background: radial-gradient(
		ellipse 50% 50% at 50% 50%,
		rgba(139, 115, 64, 0.08) 0%,
		transparent 70%
	);
}

/* Button with animated corner brackets */
.btn-brackets {
	position: relative;
	display: inline-flex;
	align-items: center;
	justify-content: center;
	font-family: var(--font-mono);
	font-size: 12px;
	text-transform: uppercase;
	letter-spacing: 0.12em;
	min-height: 40px;
	padding: 9px 16px;
	cursor: pointer;
	transition: color 0.3s ease, background-color 0.3s ease;
}

.btn-brackets::before,
.btn-brackets::after {
	content: '';
	position: absolute;
	width: 12px;
	height: 12px;
	transition: width 0.3s ease, height 0.3s ease;
	pointer-events: none;
}

.btn-brackets::before {
	top: 0;
	left: 0;
	border-top: 1.5px solid currentColor;
	border-left: 1.5px solid currentColor;
}

.btn-brackets::after {
	bottom: 0;
	right: 0;
	border-bottom: 1.5px solid currentColor;
	border-right: 1.5px solid currentColor;
}

.btn-brackets:hover::before,
.btn-brackets:hover::after {
	width: 100%;
	height: 100%;
}

/* Prose overrides for dark theme */
.prose {
	--tw-prose-body: rgba(255, 255, 255, 0.7);
	--tw-prose-headings: #ffffff;
	--tw-prose-lead: rgba(255, 255, 255, 0.7);
	--tw-prose-links: #C09E5A;
	--tw-prose-bold: #ffffff;
	--tw-prose-counters: rgba(255, 255, 255, 0.5);
	--tw-prose-bullets: rgba(255, 255, 255, 0.5);
	--tw-prose-hr: #2A2520;
	--tw-prose-quotes: rgba(255, 255, 255, 0.8);
	--tw-prose-quote-borders: #C09E5A;
	--tw-prose-captions: rgba(255, 255, 255, 0.5);
	--tw-prose-code: #D4B575;
	--tw-prose-pre-code: rgba(255, 255, 255, 0.8);
	--tw-prose-pre-bg: rgba(192, 158, 90, 0.06);
	--tw-prose-th-borders: #2A2520;
	--tw-prose-td-borders: rgba(192, 158, 90, 0.06);
}

.prose img {
	max-height: 480px;
	width: auto;
	max-width: 100%;
	margin-left: auto;
	margin-right: auto;
	border-radius: 8px;
	border: 1px solid var(--color-brand-border);
	object-fit: cover;
}

/* Prevent horizontal overflow on mobile */
.prose {
	overflow-wrap: break-word;
	word-break: break-word;
}

.prose pre {
	overflow-x: auto;
	max-width: 100%;
}

.prose table {
	display: block;
	overflow-x: auto;
	-webkit-overflow-scrolling: touch;
	max-width: 100%;
	white-space: nowrap;
	font-size: 0.875em;
}

.prose table th,
.prose table td {
	white-space: normal;
	min-width: 80px;
}

.prose :where(code):not(:where(pre *)) {
	word-break: break-all;
}

.prose a {
	color: var(--color-brand-accent);
	text-decoration: none;
	transition: color 0.2s ease;
}

.prose a:hover {
	color: var(--color-brand-accent-light);
	text-decoration: underline;
}

/* ===== Hero fly-in animations (CSS-only for SSG LCP) ===== */

@keyframes hero-fly-in {
	from {
		opacity: 0;
		transform: translateY(20px);
	}
	to {
		opacity: 1;
		transform: translateY(0);
	}
}

.hero-stagger .hero-item {
	opacity: 0;
	transform: translateY(20px);
}

.hero-stagger.mounted .hero-item {
	animation: hero-fly-in 0.6s ease-out forwards;
}

.hero-stagger.mounted .hero-item:nth-child(1) { animation-delay: 0ms; }
.hero-stagger.mounted .hero-item:nth-child(2) { animation-delay: 50ms; }
.hero-stagger.mounted .hero-item:nth-child(3) { animation-delay: 100ms; }
.hero-stagger.mounted .hero-item:nth-child(4) { animation-delay: 150ms; }

@media (prefers-reduced-motion: reduce) {
	.hero-stagger .hero-item {
		opacity: 1;
		transform: none;
	}
	.hero-stagger.mounted .hero-item {
		animation: none;
	}
}

/* ===== View Transitions ===== */

/* Theme toggle — circular reveal (clip-path animation driven by JS) */
[data-transition="theme"]::view-transition-old(root),
[data-transition="theme"]::view-transition-new(root) {
	animation: none;
	mix-blend-mode: normal;
}

[data-transition="theme"]::view-transition-old(root) {
	z-index: 1;
}

[data-transition="theme"]::view-transition-new(root) {
	z-index: 9999;
}

/* Page navigation — directional slide + fade */
@keyframes page-slide-out-left {
	to {
		transform: translateX(-8%);
		opacity: 0;
	}
}

@keyframes page-slide-in-from-right {
	from {
		transform: translateX(8%);
		opacity: 0;
	}
}

@keyframes page-slide-out-right {
	to {
		transform: translateX(8%);
		opacity: 0;
	}
}

@keyframes page-slide-in-from-left {
	from {
		transform: translateX(-8%);
		opacity: 0;
	}
}

/* Forward navigation (clicking links) */
[data-transition="page"][data-nav-direction="forward"]::view-transition-old(root) {
	animation: page-slide-out-left 0.25s ease-in-out both;
}

[data-transition="page"][data-nav-direction="forward"]::view-transition-new(root) {
	animation: page-slide-in-from-right 0.25s ease-in-out both;
}

/* Back navigation (browser back) */
[data-transition="page"][data-nav-direction="back"]::view-transition-old(root) {
	animation: page-slide-out-right 0.25s ease-in-out both;
}

[data-transition="page"][data-nav-direction="back"]::view-transition-new(root) {
	animation: page-slide-in-from-left 0.25s ease-in-out both;
}

/* Respect reduced motion for all transitions */
@media (prefers-reduced-motion: reduce) {
	::view-transition-old(root),
	::view-transition-new(root) {
		animation: none !important;
	}
}

