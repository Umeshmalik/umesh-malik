name: Post-Deploy SEO Ping

on:
  push:
    branches: [main]
    paths:
      - 'portfolio/**'
      - 'frontend/**'
  workflow_dispatch:

jobs:
  seo-ping:
    name: Detect changes & notify search engines
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
        with:
          fetch-depth: 2

      - name: Wait 90s for deploy propagation
        run: sleep 90

      - name: Submit to search engines
        run: node portfolio/scripts/indexnow-submit.mjs
